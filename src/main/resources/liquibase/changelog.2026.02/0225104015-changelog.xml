<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.27.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">

    <changeSet id="1740460800000-1" author="phongtv">
        <createTable tableName="images">
            <column name="id" type="VARCHAR(36)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_images"/>
            </column>
            <column name="created_time" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="modified_time" type="DATETIME"/>
            <column name="modified_by" type="VARCHAR(36)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="src" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>

    <changeSet id="1740460800000-2" author="phongtv">
        <createTable tableName="contacts">
            <column name="id" type="VARCHAR(36)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_contacts"/>
            </column>
            <column name="created_time" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="modified_time" type="DATETIME"/>
            <column name="modified_by" type="VARCHAR(36)"/>
            <column name="first_name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="last_name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="email" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="phone" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="other_contact" type="VARCHAR(255)"/>
            <column name="country" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="company_name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="role" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="request" type="TEXT"/>
            <column name="allow_receive_offers" type="BOOLEAN" defaultValueBoolean="false"/>
            <column name="agree_privacy_policy" type="BOOLEAN" defaultValueBoolean="false"/>
            <column name="status" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>

    <changeSet id="1740460800000-3" author="phongtv">
        <createTable tableName="configs">
            <column name="id" type="VARCHAR(36)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_configs"/>
            </column>
            <column name="created_time" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="modified_time" type="DATETIME"/>
            <column name="modified_by" type="VARCHAR(36)"/>
            <column name="key" type="VARCHAR(255)"/>
            <column name="value" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>

    <changeSet id="1740460800000-4" author="phongtv">
        <createTable tableName="auths">
            <column name="id" type="VARCHAR(36)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_auths"/>
            </column>
            <column name="created_time" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="modified_time" type="DATETIME"/>
            <column name="modified_by" type="VARCHAR(36)"/>
            <column name="email" type="VARCHAR(255)"/>
            <column name="phone_number" type="VARCHAR(255)"/>
            <column name="google_id" type="VARCHAR(255)"/>
            <column name="facebook_id" type="VARCHAR(255)"/>
            <column name="apple_id" type="VARCHAR(255)"/>
            <column name="password_hash" type="VARCHAR(255)"/>
            <column name="last_signed_in_at" type="DATETIME"/>
            <column name="create_at" type="DATETIME"/>
            <column name="disabled" type="BOOLEAN" defaultValueBoolean="false"/>
            <column name="email_verified" type="BOOLEAN" defaultValueBoolean="false"/>
            <column name="salt" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>

    <changeSet id="1740460800000-5" author="phongtv">
        <addUniqueConstraint columnNames="email" constraintName="uc_contacts_email" tableName="contacts"/>
    </changeSet>

    <changeSet id="1740460800000-6" author="phongtv">
        <addUniqueConstraint columnNames="phone" constraintName="uc_contacts_phone" tableName="contacts"/>
    </changeSet>

    <changeSet id="1740460800000-7" author="phongtv">
        <addUniqueConstraint columnNames="email" constraintName="uc_auths_email" tableName="auths"/>
    </changeSet>

    <changeSet id="1740460800000-8" author="phongtv">
        <addUniqueConstraint columnNames="phone_number" constraintName="uc_auths_phone_number" tableName="auths"/>
    </changeSet>

    <changeSet id="1740460800000-9" author="phongtv">
        <createTable tableName="users_old">
            <column name="id" type="VARCHAR(36)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_users_old"/>
            </column>
            <column name="created_time" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="modified_time" type="DATETIME"/>
            <column name="modified_by" type="VARCHAR(36)"/>
            <column name="username" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="full_name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="password_hash" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="email" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="phone" type="VARCHAR(255)"/>
            <column name="citizen_id" type="VARCHAR(255)"/>
            <column name="date_created" type="DATETIME"/>
            <column name="date_of_birth" type="DATE"/>
            <column name="address" type="VARCHAR(255)"/>
            <column name="level_id" type="VARCHAR(36)"/>
            <column name="onboarding_mentor_id" type="VARCHAR(36)"/>
            <column name="onboarding_date" type="DATE"/>
            <column name="is_deleted" type="BOOLEAN" defaultValueBoolean="false"/>
            <column name="avatar_id" type="VARCHAR(36)"/>
            <column name="refresh_token" type="VARCHAR(255)"/>
            <column name="status" type="VARCHAR(255)" defaultValue="INACTIVE"/>
        </createTable>
    </changeSet>

    <changeSet id="1740460800000-10" author="phongtv">
        <createTable tableName="request_time_off">
            <column name="id" type="VARCHAR(36)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_request_time_off"/>
            </column>
            <column name="created_time" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="modified_time" type="DATETIME"/>
            <column name="modified_by" type="VARCHAR(36)"/>
            <column name="is_morning" type="BOOLEAN"/>
            <column name="is_afternoon" type="BOOLEAN"/>
            <column name="created_date" type="DATETIME"/>
            <column name="from_day" type="DATE"/>
            <column name="reason" type="VARCHAR(255)"/>
            <column name="to_day" type="DATE"/>
            <column name="status_id" type="VARCHAR(36)"/>
            <column name="user_id" type="VARCHAR(36)"/>
        </createTable>
    </changeSet>

    <changeSet id="1740460800000-11" author="phongtv">
        <createTable tableName="projects_old">
            <column name="id" type="VARCHAR(36)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_projects_old"/>
            </column>
            <column name="created_time" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="modified_time" type="DATETIME"/>
            <column name="modified_by" type="VARCHAR(36)"/>
            <column name="project_name" type="VARCHAR(255)"/>
            <column name="project_manager_id" type="VARCHAR(36)"/>
            <column name="state" type="VARCHAR(255)" defaultValue="INCOMING"/>
            <column name="start_date" type="DATETIME"/>
            <column name="is_deleted" type="BOOLEAN" defaultValueBoolean="false"/>
            <column name="end_date" type="DATE"/>
            <column name="client_name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>

    <changeSet id="1740460800000-12" author="phongtv">
        <createTable tableName="timesheets_old">
            <column name="id" type="VARCHAR(36)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_timesheets_old"/>
            </column>
            <column name="created_time" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column name="created_by" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="modified_time" type="DATETIME"/>
            <column name="modified_by" type="VARCHAR(36)"/>
            <column name="type_id" type="VARCHAR(36)"/>
            <column name="status_id" type="VARCHAR(36)"/>
            <column name="hours" type="DOUBLE"/>
            <column name="details" type="TEXT"/>
            <column name="date" type="DATE"/>
            <column name="project_id" type="VARCHAR(36)"/>
            <column name="user_id" type="VARCHAR(36)"/>
        </createTable>
    </changeSet>

    <changeSet id="1740460800000-13" author="phongtv">
        <createTable tableName="project_members">
            <column name="project_id" type="VARCHAR(36)">
            </column>
            <column name="user_id" type="VARCHAR(36)">
            </column>
        </createTable>
    </changeSet>

    <changeSet id="1740460800000-14" author="phongtv">
        <createTable tableName="user_positions">
            <column name="user_id" type="VARCHAR(36)">
            </column>
            <column name="position_id" type="VARCHAR(36)">
            </column>
        </createTable>
    </changeSet>

    <changeSet id="1740460800000-15" author="phongtv">
        <addUniqueConstraint columnNames="username" constraintName="uc_users_old_username" tableName="users_old"/>
    </changeSet>

    <changeSet id="1740460800000-16" author="phongtv">
        <addUniqueConstraint columnNames="email" constraintName="uc_users_old_email" tableName="users_old"/>
    </changeSet>

    <changeSet id="1740460800000-17" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="level_id" baseTableName="users_old"
                                 constraintName="fk_users_old_on_level" referencedColumnNames="id"
                                 referencedTableName="configs"/>
    </changeSet>

    <changeSet id="1740460800000-18" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="onboarding_mentor_id" baseTableName="users_old"
                                 constraintName="fk_users_old_on_onboarding_mentor" referencedColumnNames="id"
                                 referencedTableName="users_old"/>
    </changeSet>

    <changeSet id="1740460800000-19" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="avatar_id" baseTableName="users_old"
                                 constraintName="fk_users_old_on_avatar" referencedColumnNames="id"
                                 referencedTableName="images"/>
    </changeSet>

    <changeSet id="1740460800000-22" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="project_manager_id" baseTableName="projects_old"
                                 constraintName="fk_projects_old_on_project_manager" referencedColumnNames="id"
                                 referencedTableName="users_old"/>
    </changeSet>

    <changeSet id="1740460800000-23" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="type_id" baseTableName="timesheets_old"
                                 constraintName="fk_timesheets_old_on_type" referencedColumnNames="id"
                                 referencedTableName="configs"/>
    </changeSet>

    <changeSet id="1740460800000-24" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="status_id" baseTableName="timesheets_old"
                                 constraintName="fk_timesheets_old_on_status" referencedColumnNames="id"
                                 referencedTableName="configs"/>
    </changeSet>

    <changeSet id="1740460800000-25" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="project_id" baseTableName="timesheets_old"
                                 constraintName="fk_timesheets_old_on_project" referencedColumnNames="id"
                                 referencedTableName="projects_old"/>
    </changeSet>

    <changeSet id="1740460800000-26" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="timesheets_old"
                                 constraintName="fk_timesheets_old_on_user" referencedColumnNames="id"
                                 referencedTableName="users_old"/>
    </changeSet>

    <changeSet id="1740460800000-28" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="project_members"
                                 constraintName="fk_project_members_on_user" referencedColumnNames="id"
                                 referencedTableName="users_old"/>
    </changeSet>

    <changeSet id="1740460800000-29" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_positions"
                                 constraintName="fk_user_positions_on_user" referencedColumnNames="id"
                                 referencedTableName="users_old"/>
    </changeSet>

    <changeSet id="1740460800000-30" author="phongtv">
        <addForeignKeyConstraint baseColumnNames="position_id" baseTableName="user_positions"
                                 constraintName="fk_user_positions_on_position" referencedColumnNames="id"
                                 referencedTableName="configs"/>
    </changeSet>

</databaseChangeLog>